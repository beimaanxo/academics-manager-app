# Academics Manager – Mobile App (Capacitor) with $12 Support IAP

Loads your live site in a secure WebView:
**https://frugal-dogfish-47.convex.app**

Includes cross‑platform in‑app purchases so users can make a **$12 “Support”** contribution inside the app.

---

## Quick Start

```bash
npm i
npm run assets           # generates icon/splash from /resources
npm run android          # add + open Android
npm run ios              # add + open iOS (macOS)
```

> Change bundle IDs later in `capacitor.config.ts` and inside Android Studio / Xcode project settings after adding platforms.

---

## How the $12 Support Purchase Works

We use **@capacitor-community/in-app-purchases**.

### Product IDs (create these in the stores)
- **iOS (App Store Connect → In‑App Purchases):** `com.example.academicsmanager.support12` (type: *Consumable* or *Non‑Consumable* for a tip; Apple “tips” are allowed as IAPs)
- **Android (Play Console → Monetization → Products):** `support_12` (Managed product)

Price both at **USD 12.00** (and add required localizations).

> Apple review tip: If the purchase doesn’t unlock digital content/features, label it clearly as a “Tip” / “Support” contribution and do not imply access to gated digital content outside IAP.

### Option A: Trigger IAP from your website
If you can add one line to your site:
```html
<script src="capacitor://localhost/iap-helper.js"></script>
```
Then call in your site (e.g., from a “Support $12” button):
```html
<button onclick="window.AcademicsManagerSupport?.purchaseSupport()">Support $12</button>
```
The helper uses Capacitor’s bridge inside the app. Outside the app, it will gracefully fall back.

**Hosting note:** When the app loads an external URL, the `capacitor://localhost/...` path serves files bundled with the native app.

### Option B: Native button (no changes to your site)
- **Android:** In `MainActivity`, add a toolbar/menu item and call the plugin via a small JS evaluation or a native wrapper function.
- **iOS:** Add a `UIBarButtonItem` in the root `UIViewController` and call into the plugin.

I included this project in “external URL” mode so your site stays the source of truth.

---

## Store Setup Checklist

**iOS**
1. App Store Connect → App Information:
   - Set Bundle ID to match Xcode project (you can rename later).
2. In‑App Purchases:
   - Add `com.example.academicsmanager.support12` as a **Consumable** (or **Non‑Consumable** “Tip”).
   - Fill in price/localization/screenshots if requested.
3. Sign & capabilities:
   - Enable **In‑App Purchase** capability in Xcode.
4. Privacy:
   - If you don’t request device permissions, your privacy manifest is minimal.
5. Build → Archive → Upload via Xcode.

**Android**
1. Play Console → Monetize → Products → In‑app products:
   - Add `support_12`, set price to **$12.00**.
2. App integrity & signing set up.
3. Generate **AAB** in Android Studio.
4. Submit new release, add testers for billing to test IAP.

---

## Deep Links (optional)

- **Custom scheme:** `ios.scheme` set to `academics`. For Android, add an *intent-filter* after project creation.
- **Universal/App Links:** requires hosting `apple-app-site-association` and `assetlinks.json` on your domain. If hosting on `convex.app` is limited, prefer the custom scheme.

---

## Notes on Apple Guidelines

- A pure website wrapper must still feel “app-like.” Consider enabling pull-to-refresh, share sheet, and a native “Support” button to pass review.
- If you accept payments for *digital* features/content, they must go through IAP. If it’s a **tip**, IAP is allowed and recommended.

---

## Development Tips

- Back button: if your site is an SPA, it should respect browser history to avoid closing the app on Android back press.
- File uploads/camera: add usage descriptions in Xcode Info if you rely on these via the `<input type="file">` elements.
- If authentication uses popups, prefer redirects in the same tab or use `@capacitor/browser` plugin.

---

Generated by ChatGPT.